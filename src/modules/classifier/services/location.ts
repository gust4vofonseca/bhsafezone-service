import { Injectable } from '@nestjs/common';
import * as puppeteer from 'puppeteer';
import * as cheerio from 'cheerio';

@Injectable()
export class RegionService {
  private readonly bairroParaRegiao: Record<string, string> = {
    'AARÃO REIS': 'NORTE',
    'ACABA MUNDO': 'CENTRO-SUL',
    ACAIACA: 'NORDESTE',
    'ADEMAR MALDONADO': 'BARREIRO',
    AEROPORTO: 'PAMPULHA',
    'ÁGUAS CLARAS': 'BARREIRO',
    'ALÍPIO DE MELO': 'PAMPULHA',
    ALPES: 'OESTE',
    'ALTA TENSÃO': 'BARREIRO',
    'ALTA TENSÃO I': 'BARREIRO',
    'ALTO BARROCA': 'OESTE',
    'ALTO CAIÇARAS': 'NOROESTE',
    'ALTO DAS ANTENAS': 'BARREIRO',
    'ALTO DOS PINHEIROS': 'NOROESTE',
    'ALTO VERA CRUZ': 'LESTE',
    'ÁLVARO CAMARGOS': 'NOROESTE',
    AMBROSINA: 'OESTE',
    ANCHIETA: 'CENTRO-SUL',
    ANDIROBA: 'NORDESTE',
    'ANTÔNIO RIBEIRO DE ABREU': 'NORDESTE',
    APARECIDA: 'NOROESTE',
    'APARECIDA SÉTIMA SEÇÃO': 'NOROESTE',
    ÁPIA: 'CENTRO-SUL',
    APOLÔNIA: 'VENDA NOVA',
    APOLONIA: 'VENDA NOVA',
    ARAGUAIA: 'BARREIRO',
    'ÁTILA DE PAIVA': 'BARREIRO',
    'ATILA DE PAIVA': 'BARREIRO',
    BACURAU: 'NORTE',
    'BAIRRO DAS INDÚSTRIAS I': 'BARREIRO',
    'BAIRRO NOVO DAS INDÚSTRIAS': 'BARREIRO',
    BALEIA: 'LESTE',
    BANDEIRANTES: 'PAMPULHA',
    'BARÃO HOMEM DE MELO I': 'OESTE',
    'BARÃO HOMEM DE MELO II': 'OESTE',
    'BARÃO HOMEM DE MELO III': 'OESTE',
    'BARÃO HOMEM DE MELO IV': 'OESTE',
    BARREIRO: 'BARREIRO',
    'BARRO PRETO': 'CENTRO-SUL',
    BARROCA: 'OESTE',
    'BEIJA FLOR': 'NORDESTE',
    'BEIRA-LINHA': 'NORDESTE',
    'BEIRA LINHA': 'NORDESTE',
    'BELA VITÓRIA': 'NORDESTE',
    'BELA VITORIA': 'NORDESTE',
    BELÉM: 'LESTE',
    BELMONTE: 'NORDESTE',
    BELVEDERE: 'CENTRO-SUL',
    BERNADETE: 'BARREIRO',
    BETÂNIA: 'OESTE',
    BIQUINHAS: 'NORTE',
    'BISPO DE MAURA': 'PAMPULHA',
    'BOA ESPERANÇA': 'NORDESTE',
    'BOA UNIÃO I': 'NORTE',
    'BOA UNIÃO II': 'NORTE',
    'BOA VIAGEM': 'CENTRO-SUL',
    'BOA VISTA': 'LESTE',
    'BOM JESUS': 'NOROESTE',
    BONFIM: 'NOROESTE',
    BONSUCESSO: 'BARREIRO',
    'BRASIL INDUSTRIAL': 'BARREIRO',
    BRAÚNAS: 'PAMPULHA',
    BURITIS: 'OESTE',
    CACHOEIRINHA: 'NORDESTE',
    'CAETANO FURQUIM': 'LESTE',
    'CAIÇARA-ADELAIDE': 'NOROESTE',
    CAIÇARAS: 'NOROESTE',
    CALAFATE: 'OESTE',
    CALIFÓRNIA: 'NOROESTE',
    CAMARGOS: 'OESTE',
    'CAMPO ALEGRE': 'NORTE',
    CAMPONESA: 'LESTE',
    'CAMPONESA I': 'LESTE',
    'CAMPONESA II': 'LESTE',
    'CAMPONESA III': 'LESTE',
    'CAMPUS UFMG': 'PAMPULHA',
    CANAÃ: 'VENDA NOVA',
    CANADÁ: 'NORDESTE',
    CANDELARIA: 'VENDA NOVA',
    CANDELÁRIA: 'VENDA NOVA',
    'CAPITÃO EDUARDO': 'NORDESTE',
    CARDOSO: 'BARREIRO',
    'CARLOS PRATES': 'NOROESTE',
    CARMO: 'CENTRO-SUL',
    'CASA BRANCA': 'LESTE',
    CASTANHEIRA: 'BARREIRO',
    CASTELO: 'PAMPULHA',
    'CDI JATOBÁ': 'BARREIRO',
    'CDI JATOBA': 'BARREIRO',
    CENÁCULO: 'VENDA NOVA',
    CENTRO: 'CENTRO-SUL',
    'CÉU AZUL': 'VENDA NOVA',
    'CHÁCARA LEONINA': 'OESTE',
    'CIDADE JARDIM': 'CENTRO-SUL',
    'CIDADE JARDIM TAQUARIL': 'LESTE',
    'CIDADE NOVA': 'NORDESTE',
    CINQÜENTENÁRIO: 'OESTE',
    COMITECO: 'CENTRO-SUL',
    CONCÓRDIA: 'NORDESTE',
    'CÔNEGO PINHEIRO': 'LESTE',
    'CÔNEGO PINHEIRO A': 'LESTE',
    CONFISCO: 'PAMPULHA',
    'CONJUNTO BONSUCESSO': 'BARREIRO',
    'CONJUNTO CALIFÓRNIA I': 'NOROESTE',
    'CONJUNTO CALIFÓRNIA II': 'NOROESTE',
    'CONJUNTO CAPITÃO EDUARDO': 'NORDESTE',
    'CONJUNTO CELSO MACHADO': 'PAMPULHA',
    'CONJUNTO FLORAMAR': 'NORTE',
    'CONJUNTO JARDIM FILADÉLFIA': 'NOROESTE',
    'CONJUNTO JATOBÁ': 'BARREIRO',
    'CONJUNTO LAGOA': 'PAMPULHA',
    'CONJUNTO MINASCAIXA': 'VENDA NOVA',
    'CONJUNTO NOVO DOM BOSCO': 'NOROESTE',
    'CONJUNTO PAULO VI': 'NORDESTE',
    'CONJUNTO PROVIDÊNCIA': 'NORTE',
    'CONJUNTO SANTA MARIA': 'CENTRO-SUL',
    'CONJUNTO SÃO FRANCISCO DE ASSIS': 'PAMPULHA',
    'CONJUNTO SERRA VERDE': 'VENDA NOVA',
    'CONJUNTO TAQUARIL': 'LESTE',
    COPACABANA: 'VENDA NOVA',
    COQUEIROS: 'NOROESTE',
    'CORAÇÃO DE JESUS': 'CENTRO-SUL',
    'CORAÇÃO EUCARÍSTICO': 'NOROESTE',
    CORUMBIARA: 'BARREIRO',
    CRUZEIRO: 'CENTRO-SUL',
    CUSTODINHA: 'OESTE',
    DELTA: 'NOROESTE',
    'DISTRITO INDUSTRIAL DO JATOBÁ': 'BARREIRO',
    'DOM BOSCO': 'NOROESTE',
    'DOM CABRAL': 'NOROESTE',
    'DOM JOAQUIM': 'NORDESTE',
    'DOM SILVÉRIO': 'NORDESTE',
    'DONA CLARA': 'PAMPULHA',
    'ENGENHO NOGUEIRA': 'PAMPULHA',
    ERMELINDA: 'NOROESTE',
    'ERNESTO DO NASCIMENTO': 'BARREIRO',
    ESPERANÇA: 'BARREIRO',
    ESPLANADA: 'LESTE',
    ESTORIL: 'OESTE',
    ESTRELA: 'CENTRO-SUL',
    'ESTRELA DO ORIENTE': 'OESTE',
    'ETELVINA CARNEIRO': 'NORTE',
    EUROPA: 'VENDA NOVA',
    EYMARD: 'NORDESTE',
    FAZENDINHA: 'CENTRO-SUL',
    'FERNÃO DIAS': 'NORDESTE',
    FLAMENGO: 'VENDA NOVA',
    'FLÁVIO DE OLIVEIRA': 'BARREIRO',
    'FLÁVIO MARQUES LISBOA': 'BARREIRO',
    FLORAMAR: 'NORTE',
    FLORESTA: 'CENTRO-SUL',
    'FREI LEOPOLDO': 'NORTE',
    FUNCIONÁRIOS: 'CENTRO-SUL',
    GAMELEIRA: 'OESTE',
    GARÇAS: 'PAMPULHA',
    GLÓRIA: 'NOROESTE',
    GOIÂNIA: 'NORDESTE',
    GRAJAÚ: 'OESTE',
    'GRANJA DE FREITAS': 'LESTE',
    'GRANJA WERNECK': 'NORTE',
    GROTA: 'LESTE',
    GROTINHA: 'NORDESTE',
    GUANABARA: 'NORDESTE',
    GUARANI: 'NORTE',
    GUARATÃ: 'OESTE',
    GUTIERREZ: 'OESTE',
    HAVAÍ: 'OESTE',
    HELIÓPOLIS: 'NORTE',
    HORTO: 'LESTE',
    'HORTO FLORESTAL': 'LESTE',
    IMBAÚBAS: 'OESTE',
    INCONFIDÊNCIA: 'PAMPULHA',
    INDAIÁ: 'PAMPULHA',
    INDEPENDÊNCIA: 'BARREIRO',
    IPÊ: 'NORDESTE',
    IPIRANGA: 'NORDESTE',
    ITAIPU: 'BARREIRO',
    ITAPOÃ: 'PAMPULHA',
    ITATIAIA: 'PAMPULHA',
    JAQUELINE: 'NORTE',
    JARAGUÁ: 'PAMPULHA',
    'JARDIM ALVORADA': 'PAMPULHA',
    'JARDIM AMÉRICA': 'OESTE',
    'JARDIM ATLÂNTICO': 'PAMPULHA',
    'JARDIM DO VALE': 'BARREIRO',
    'JARDIM DOS COMERCIÁRIOS': 'VENDA NOVA',
    'JARDIM FELICIDADE': 'NORTE',
    'JARDIM LEBLON': 'VENDA NOVA',
    'JARDIM MONTANHÊS': 'NOROESTE',
    'JARDIM SÃO JOSÉ': 'PAMPULHA',
    'JARDIM VITÓRIA': 'NORDESTE',
    JARDINÓPOLIS: 'OESTE',
    JATOBÁ: 'BARREIRO',
    'JOÃO ALFREDO': 'LESTE',
    'JOÃO PAULO II': 'BARREIRO',
    'JOÃO PINHEIRO': 'NOROESTE',
    'JONAS VEIGA': 'LESTE',
    JULIANA: 'NORTE',
    LAGOA: 'VENDA NOVA',
    'LAGOA DA PAMPULHA': 'PAMPULHA',
    LAGOINHA: 'NOROESTE',
    'LAGOINHA LEBLON': 'VENDA NOVA',
    LAJEDO: 'NORTE',
    LARANJEIRAS: 'VENDA NOVA',
    LEONINA: 'OESTE',
    LETÍCIA: 'VENDA NOVA',
    LIBERDADE: 'PAMPULHA',
    LINDÉIA: 'BARREIRO',
    LORENA: 'NOROESTE',
    LOURDES: 'CENTRO-SUL',
    LUXEMBURGO: 'CENTRO-SUL',
    'MINAS CAIXA': 'VENDA NOVA',
    'MADRE GERTRUDES': 'OESTE',
    MADRI: 'NORTE',
    'MALA E CUIA': 'CENTRO-SUL',
    MANACÁS: 'PAMPULHA',
    MANGABEIRAS: 'CENTRO-SUL',
    MANGUEIRAS: 'BARREIRO',
    MARAJÓ: 'OESTE',
    MARAVILHA: 'OESTE',
    MARÇOLA: 'CENTRO-SUL',
    'MARIA GORETTI': 'NORDESTE',
    'MARIA HELENA': 'VENDA NOVA',
    'MARIA TERESA': 'NORTE',
    'MARIA VIRGÍNIA': 'NORDESTE',
    'MARIANO DE ABREU': 'LESTE',
    'MARIETA I': 'BARREIRO',
    'MARIETA II': 'BARREIRO',
    MARILÂNDIA: 'BARREIRO',
    MARIQUINHAS: 'NORTE',
    MARMITEIROS: 'NOROESTE',
    MILIONÁRIOS: 'BARREIRO',
    'MINAS BRASIL': 'NOROESTE',
    MINASCAIXA: 'VENDA NOVA',
    MINASLÂNDIA: 'NORTE',
    MINEIRÃO: 'BARREIRO',
    MIRAMAR: 'BARREIRO',
    MIRANTE: 'NORTE',
    MIRTES: 'NORDESTE',
    'MONSENHOR MESSIAS': 'NOROESTE',
    'MONTE AZUL': 'NORTE',
    'MONTE SÃO JOSÉ': 'CENTRO-SUL',
    'MORRO DOS MACACOS': 'NORDESTE',
    NAZARÉ: 'NORDESTE',
    'NOSSA SENHORA DA APARECIDA': 'CENTRO-SUL',
    'NOSSA SENHORA DA CONCEIÇÃO': 'CENTRO-SUL',
    'NOSSA SENHORA DE FÁTIMA': 'CENTRO-SUL',
    'NOSSA SENHORA DO ROSÁRIO': 'CENTRO-SUL',
    'NOVA CACHOEIRINHA': 'NOROESTE',
    'NOVA CINTRA': 'OESTE',
    'NOVA ESPERANÇA': 'NOROESTE',
    'NOVA FLORESTA': 'NORDESTE',
    'NOVA GAMELEIRA': 'OESTE',
    'NOVA GRANADA': 'OESTE',
    'NOVA PAMPULHA': 'PAMPULHA',
    'NOVA SUISSA': 'OESTE',
    'NOVA VISTA': 'LESTE',
    'NOVO AARÃO REIS': 'NORTE',
    'NOVO GLÓRIA': 'NOROESTE',
    'NOVO OURO PRETO': 'PAMPULHA',
    'NOVO SANTA CECÍLIA': 'BARREIRO',
    'NOVO SÃO LUCAS': 'CENTRO-SUL',
    'NOVO TUPI': 'NORTE',
    OESTE: 'OESTE',
    OLARIA: 'BARREIRO',
    "OLHOS D'ÁGUA": 'OESTE',
    'OURO MINAS': 'NORDESTE',
    'OURO PRETO': 'PAMPULHA',
    'PADRE EUSTÁQUIO': 'NOROESTE',
    PALMARES: 'NORDESTE',
    PALMEIRAS: 'OESTE',
    PANTANAL: 'OESTE',
    PAQUETÁ: 'PAMPULHA',
    PARAÍSO: 'LESTE',
    'PARQUE SÃO JOSÉ': 'OESTE',
    'PARQUE SÃO PEDRO': 'VENDA NOVA',
    'PAULO VI': 'NORDESTE',
    'PEDREIRA PRADO LOPES': 'NOROESTE',
    PETRÓPOLIS: 'BARREIRO',
    PILAR: 'BARREIRO',
    PINDORAMA: 'NOROESTE',
    'PINDURA SAIA': 'CENTRO-SUL',
    PIRAJÁ: 'NORDESTE',
    PIRATININGA: 'VENDA NOVA',
    PIRINEUS: 'LESTE',
    PLANALTO: 'NORTE',
    POMPÉIA: 'LESTE',
    PONGELUPE: 'BARREIRO',
    'POUSADA SANTO ANTÔNIO': 'NORDESTE',
    PRADO: 'OESTE',
    'PRIMEIRO DE MAIO': 'NORTE',
    PROVIDÊNCIA: 'NORTE',
    RENASCENÇA: 'NORDESTE',
    'RIBEIRO DE ABREU': 'NORDESTE',
    'RIO BRANCO': 'VENDA NOVA',
    'SAGRADA FAMÍLIA': 'LESTE',
    'SALGADO FILHO': 'OESTE',
    'SANTA AMÉLIA': 'PAMPULHA',
    'SANTA BRANCA': 'PAMPULHA',
    'SANTA CECÍLIA': 'BARREIRO',
    'SANTA CRUZ': 'NORDESTE',
    'SANTA EFIGÊNIA': 'CENTRO-SUL',
    'SANTA HELENA': 'BARREIRO',
    'SANTA INÊS': 'LESTE',
    'SANTA ISABEL': 'CENTRO-SUL',
    'SANTA LÚCIA': 'CENTRO-SUL',
    'SANTA MARGARIDA': 'BARREIRO',
    'SANTA MARIA': 'OESTE',
    'SANTA RITA': 'BARREIRO',
    'SANTA RITA DE CÁSSIA': 'CENTRO-SUL',
    'SANTA ROSA': 'PAMPULHA',
    'SANTA SOFIA': 'OESTE',
    'SANTA TEREZA': 'LESTE',
    'SANTA TEREZINHA': 'PAMPULHA',
    'SANTANA DO CAFEZAL': 'CENTRO-SUL',
    'SANTO AGOSTINHO': 'CENTRO-SUL',
    'SANTO ANDRÉ': 'NOROESTE',
    'SANTO ANTÔNIO': 'CENTRO-SUL',
    'SÃO BENEDITO': 'NORDESTE',
    'SÃO BENTO': 'CENTRO-SUL',
    'SÃO BERNARDO': 'NORTE',
    'SÃO CRISTÓVÃO': 'NOROESTE',
    'SÃO DAMIÃO': 'VENDA NOVA',
    'SÃO FRANCISCO': 'PAMPULHA',
    'SÃO FRANCISCO DAS CHAGAS': 'NOROESTE',
    'SÃO GABRIEL': 'NORDESTE',
    'SÃO GERALDO': 'LESTE',
    'SÃO GONÇALO': 'NORTE',
    'SÃO JOÃO': 'BARREIRO',
    'SÃO JOÃO BATISTA': 'VENDA NOVA',
    'SÃO JORGE I': 'OESTE',
    'SÃO JORGE II': 'OESTE',
    'SÃO JORGE III': 'OESTE',
    'SÃO JOSÉ': 'PAMPULHA',
    'SÃO LUCAS': 'CENTRO-SUL',
    'SÃO LUÍZ': 'PAMPULHA',
    'SÃO LUIZ': 'PAMPULHA',
    'SÃO MARCOS': 'NORDESTE',
    'SÃO PAULO': 'NORDESTE',
    'SÃO SALVADOR': 'NOROESTE',
    'SÃO SEBASTIÃO': 'NORDESTE',
    'SÃO TOMÁZ': 'NORTE',
    'SÃO TOMAZ': 'NORTE',
    'SÃO VICENTE': 'LESTE',
    SATÉLITE: 'NORTE',
    SAUDADE: 'LESTE',
    SAVASSI: 'CENTRO-SUL',
    'SENHOR DOS PASSOS': 'NOROESTE',
    SERRA: 'CENTRO-SUL',
    'SERRA DO CURRAL': 'BARREIRO',
    'SERRA VERDE': 'VENDA NOVA',
    SERRANO: 'PAMPULHA',
    SILVEIRA: 'NORDESTE',
    SION: 'CENTRO-SUL',
    'SOLAR DO BARREIRO': 'BARREIRO',
    SOLIMÕES: 'NORTE',
    'SPORT CLUB': 'OESTE',
    SUMARÉ: 'NOROESTE',
    SUZANA: 'PAMPULHA',
    TAQUARIL: 'LESTE',
    'TEIXEIRA DIAS': 'BARREIRO',
    TIRADENTES: 'NORDESTE',
    TIROL: 'BARREIRO',
    'TRÊS MARIAS': 'NORDESTE',
    TREVO: 'PAMPULHA',
    'TÚNEL DE IBIRITÉ': 'BARREIRO',
    'TUPI A': 'NORTE',
    'TUPI B': 'NORTE',
    UNIÃO: 'NORDESTE',
    UNIDAS: 'VENDA NOVA',
    UNIVERSO: 'VENDA NOVA',
    URCA: 'PAMPULHA',
    'VALE DO JATOBÁ': 'BARREIRO',
    'VÁRZEA DA PALMA': 'VENDA NOVA',
    'VENDA NOVA': 'VENDA NOVA',
    VENTOSA: 'OESTE',
    'VERA CRUZ': 'LESTE',
    'VILA AEROPORTO': 'NORTE',
    'VILA AEROPORTO JARAGUÁ': 'PAMPULHA',
    'VILA ANTENA': 'OESTE',
    'VILA ANTENA MONTANHÊS': 'PAMPULHA',
    'VILA ÁTILA DE PAIVA': 'BARREIRO',
    'VILA BANDEIRANTES': 'CENTRO-SUL',
    'VILA BARRAGEM SANTA LÚCIA': 'CENTRO-SUL',
    'VILA BATIK': 'BARREIRO',
    'VILA BETÂNIA': 'OESTE',
    'VILA BOA VISTA': 'LESTE',
    'VILA CALAFATE': 'OESTE',
    'VILA CALIFÓRNIA': 'NOROESTE',
    'VILA CANTO DO SABIÁ': 'VENDA NOVA',
    'VILA CEMIG': 'BARREIRO',
    'VILA CLÓRIS': 'NORTE',
    'VILA COPACABANA': 'VENDA NOVA',
    'VILA COPASA': 'BARREIRO',
    'VILA COQUEIRAL': 'NOROESTE',
    'VILA DA AMIZADE': 'OESTE',
    'VILA DA ÁREA': 'LESTE',
    'VILA DA LUZ': 'NORDESTE',
    'VILA DA PAZ': 'NORDESTE',
    'VILA DAS OLIVEIRAS': 'NOROESTE',
    'VILA DIAS': 'LESTE',
    'VILA DO POMBAL': 'NORDESTE',
    'VILA DOS ANJOS': 'VENDA NOVA',
    'VILA ECOLÓGICA': 'BARREIRO',
    'VILA ENGENHO NOGUEIRA': 'PAMPULHA',
    'VILA ESPLANADA': 'NORDESTE',
    'VILA FORMOSA': 'BARREIRO',
    'VILA FUMEC': 'CENTRO-SUL',
    'VILA HAVAÍ': 'OESTE',
    'VILA INDEPENDÊNCIA I': 'BARREIRO',
    'VILA INDEPENDÊNCIA II': 'BARREIRO',
    'VILA INDEPENDÊNCIA IV': 'BARREIRO',
    'VILA INESTAN': 'NORDESTE',
    'VILA IPIRANGA': 'NORDESTE',
    'VILA JARDIM ALVORADA': 'PAMPULHA',
    'VILA JARDIM LEBLON': 'VENDA NOVA',
    'VILA JARDIM MONTANHÊS': 'PAMPULHA',
    'VILA JARDIM SÃO JOSÉ': 'PAMPULHA',
    'VILA MADRE GERTRUDES I': 'OESTE',
    'VILA MADRE GERTRUDES II': 'OESTE',
    'VILA MADRE GERTRUDES III': 'OESTE',
    'VILA MADRE GERTRUDES V': 'OESTE',
    'VILA MALOCA': 'NOROESTE',
    'VILA MANGUEIRAS': 'BARREIRO',
    'VILA MANTIQUEIRA': 'VENDA NOVA',
    'VILA MARIA': 'NORDESTE',
    'VILA MINASLÂNDIA': 'NORTE',
    'VILA NOSSA SENHORA APARECIDA': 'VENDA NOVA',
    'VILA NOSSA SENHORA DO ROSÁRIO': 'LESTE',
    'VILA NOVA': 'NORTE',
    'VILA NOVA CACHOEIRINHA II': 'NOROESTE',
    'VILA NOVA CACHOEIRINHA IV': 'NORDESTE',
    'VILA NOVA DOS MILIONÁRIOS': 'BARREIRO',
    'VILA NOVA GAMELEIRA I': 'OESTE',
    'VILA NOVA GAMELEIRA II': 'OESTE',
    'VILA NOVA GAMELEIRA III': 'OESTE',
    'VILA NOVA PARAÍSO': 'OESTE',
    'VILA NOVO SÃO LUCAS': 'CENTRO-SUL',
    'VILA OESTE': 'OESTE',
    "VILA OLHOS D'ÁGUA": 'BARREIRO',
    'VILA OURO MINAS': 'NORDESTE',
    'VILA PAQUETÁ': 'PAMPULHA',
    'VILA PARAÍSO': 'LESTE',
    'VILA PARIS': 'CENTRO-SUL',
    'VILA PETRÓPOLIS': 'BARREIRO',
    'VILA PILAR': 'BARREIRO',
    'VILA PINHO': 'BARREIRO',
    'VILA PIRATININGA': 'BARREIRO',
    'VILA PIRATININGA VENDA NOVA': 'VENDA NOVA',
    'VILA PRIMEIRO DE MAIO': 'NORTE',
    'VILA PUC': 'NOROESTE',
    'VILA REAL I': 'PAMPULHA',
    'VILA REAL II': 'PAMPULHA',
    'VILA RICA': 'PAMPULHA',
    'VILA SANTA MÔNICA': 'VENDA NOVA',
    'VILA SANTA ROSA': 'PAMPULHA',
    'VILA SANTO ANTÔNIO': 'PAMPULHA',
    'VILA SANTO ANTÔNIO BARROQUINHA': 'PAMPULHA',
    'VILA SÃO DIMAS': 'NORDESTE',
    'VILA SÃO FRANCISCO': 'PAMPULHA',
    'VILA SÃO GABRIEL JACUÍ': 'NORDESTE',
    'VILA SÃO GERALDO': 'LESTE',
    'VILA SÃO JOÃO BATISTA': 'VENDA NOVA',
    'VILA SÃO PAULO': 'NORDESTE',
    'VILA SÃO RAFAEL': 'LESTE',
    'VILA SATÉLITE': 'VENDA NOVA',
    'VILA SESC': 'VENDA NOVA',
    'VILA SUMARÉ': 'NOROESTE',
    'VILA SUZANA I': 'PAMPULHA',
    'VILA SUZANA II': 'PAMPULHA',
    'VILA TIROL': 'BARREIRO',
    'VILA TRINTA E UM DE MARÇO': 'NOROESTE',
    'VILA UNIÃO': 'LESTE',
    'VILA VERA CRUZ I': 'LESTE',
    'VILA VERA CRUZ II': 'LESTE',
    'VILA VISTA ALEGRE': 'OESTE',
    VIRGÍNIA: 'OESTE',
    'VISTA ALEGRE': 'OESTE',
    'VISTA DO SOL': 'NORDESTE',
    VITÓRIA: 'NORDESTE',
    'VITÓRIA DA CONQUISTA': 'BARREIRO',
    'XANGRI-LÁ': 'PAMPULHA',
    'XODÓ-MARIZE': 'NORTE',
    'ZILAH SPÓSITO': 'NORTE',
    'BAIRRO DAS INDÚSTRIAS II': 'OESTE',
    'CABANA DO PAI TOMÁS': 'OESTE',
    'COLÉGIO BATISTA': 'NORDESTE',
    DIAMANTE: 'BARREIRO',
    GRAÇA: 'NORDESTE',
    'JARDIM GUANABARA': 'NORTE',
    MANTIQUEIRA: 'VENDA NOVA',
    'NOVA AMÉRICA': 'VENDA NOVA',
    PENHA: 'NORDESTE',
    'SANTA MÔNICA': 'VENDA NOVA',
    'SÃO PEDRO': 'CENTRO-SUL',
    UNIVERSITÁRIO: 'PAMPULHA',
    'VILA DE SÁ': 'NORDESTE',
    'VILA NOVA CACHOEIRINHA I': 'NOROESTE',
    'VILA SÃO GABRIEL': 'NORDESTE',
  };

  async identificarRegiao(texto: string): Promise<string | null> {
    // Verifica se algum bairro está no texto
    for (const bairro in this.bairroParaRegiao) {
      if (texto.toLowerCase().includes(bairro.toLowerCase())) {
        console.log({ bairro });
        return this.bairroParaRegiao[bairro];
      }
    }

    // Procura uma URL no texto
    const urlMatch = texto.match(/https?:\/\/[^\s]+/);
    if (urlMatch) {
      const url = urlMatch[0];
      return await this.buscarRegiaoNaUrl(url);
    }

    return null;
  }

  private async buscarRegiaoNaUrl(url: string): Promise<string | null> {
    try {
      const browser = await puppeteer.launch({ headless: true });
      const page = await browser.newPage();
      await page.goto(url, { waitUntil: 'domcontentloaded' });

      // Obtém apenas o conteúdo do body
      const bodyHTML = await page.evaluate(() => document.body.innerHTML);
      const $ = cheerio.load(bodyHTML);
      const textoPagina = $('body').text().toLowerCase();

      await browser.close();

      // Verifica se algum bairro está no texto da página
      for (const bairro in this.bairroParaRegiao) {
        if (textoPagina.includes(bairro.toLowerCase())) {
          console.log({ textoPagina });
          return this.bairroParaRegiao[bairro];
        }
      }
    } catch (error) {
      console.error('Erro ao buscar localização na URL:', error);
    }
    return null;
  }
}
